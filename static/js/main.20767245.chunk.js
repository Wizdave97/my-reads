(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports={main:"library_main__BX3gv",navbar:"library_navbar__7EP6Y",content:"library_content__1JBKp",link:"library_link__1ZWZH"}},16:function(e,t,n){e.exports={shelf:"shelf_shelf__15eVK",title:"shelf_title__26ILy",header:"shelf_header__3wLMZ",books:"shelf_books__pvNQk"}},17:function(e,t,n){e.exports={book:"book_book__3a6ra",details:"book_details__CoZWK",dropdown:"book_dropdown__3eKLq"}},18:function(e,t,n){e.exports={"search-container":"searchInput_search-container__2PjK9","search-books":"searchInput_search-books__30INs","back-button":"searchInput_back-button__3qWWC"}},20:function(e,t,n){e.exports={results:"search_results__jFpeP",container:"search_container__2SQC7"}},27:function(e,t,n){e.exports=n.p+"static/media/arrow-drop-down.9d4e3f36.svg"},28:function(e,t,n){e.exports={modal:"modal_modal__tZHLq","show-modal":"modal_show-modal__1hWUS"}},29:function(e,t,n){e.exports=n.p+"static/media/add.75d390e5.svg"},32:function(e,t,n){e.exports=n.p+"static/media/arrow-back.20e8847d.svg"},33:function(e,t,n){e.exports=n(51)},38:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(26),c=n.n(r),i=(n(38),n(5)),s=n(6),l=n(8),u=n(7),h=n(9),d=(n(39),n(15)),f=n.n(d),p=n(12),m="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:b},y=function(){return fetch("".concat(m,"/books"),{headers:k}).then(function(e){return e.json()}).then(function(e){return e.books})},g=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(p.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},w=n(16),E=n.n(w),_=n(14),x=n(17),j=n.n(x),S=n(27),O=n.n(S),R=function(){return o.a.createElement("img",{src:O.a,style:{width:"30px",height:"30px"},alt:"dropdown button"})},N=n(28),B=n.n(N),C=function(e){return o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.change(t)},name:e.name,checked:e.checked})},A=function e(t){var n={},a=null;t&&(n=t.modalShow?{display:"block"}:{display:"none"});var r=["none","read","wantToRead","currentlyReading"];if(t&&t.checkboxes)return a=t.checkboxes,o.a.createElement("div",{ref:e,className:B.a.modal,style:n},o.a.createElement("ul",null,["None","Read","want to Read","Currently Reading"].map(function(e,n){return o.a.createElement("li",{key:n},o.a.createElement(C,{change:t.change,name:r[n],checked:a[r[n]]}),e)})))},T=["currentlyReading","read","wantToRead"],W=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={modalShow:!1,checkboxes:{CurrentlyReading:!1,read:!1,none:!1,wantToRead:!1}},n.showModalHandler=function(){n.setState(function(e){return{modalShow:!e.modalShow}})},n.onCheckboxSelect=function(e){var t=e.target.name,a=n.state.checkboxes;Object.keys(a).map(function(e){return a[e]=!1}),a[t]=!0,n.setState({checkboxes:a}),n.props.update(n.props.book,t)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;T.includes(this.props.book.shelf)?this.setState(function(t){return{checkboxes:Object(p.a)({},t.checkboxes,Object(_.a)({},e.props.book.shelf,!0))}}):this.setState(function(e){return{checkboxes:Object(p.a)({},e.checkboxes,Object(_.a)({},"none",!0))}})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:j.a.book},o.a.createElement("img",{src:this.props.book.imageLinks?this.props.book.imageLinks.thumbnail:"",alt:this.props.book.title?this.props.book.title:""}),o.a.createElement("div",{className:j.a.details},o.a.createElement("p",null,this.props.book.title?this.props.book.title:""),o.a.createElement("p",null,o.a.createElement("strong",null,this.props.book.authors?this.props.book.authors[0]:""))),o.a.createElement("div",{className:j.a.dropdown,role:"button",tabIndex:"0",onClick:function(){return e.showModalHandler()}},o.a.createElement(R,null)),o.a.createElement(A,{modalShow:this.state.modalShow,checkboxes:this.state.checkboxes,change:this.onCheckboxSelect}))}}]),t}(a.Component),q=function(e){var t=null;return e.books&&(t=e.books.map(function(t){return o.a.createElement(W,{getBooks:e.getBooks,update:e.update,key:t.id,book:t})})),o.a.createElement("div",{className:E.a.shelf},o.a.createElement("div",{className:E.a.header},o.a.createElement("h3",{className:E.a.title},e.title)),o.a.createElement("div",{className:E.a.books},t))},L=n(29),I=n.n(L),M=function(){return o.a.createElement("img",{src:I.a,alt:"Back Button"})},P=n(10),U=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currentlyReading:[],read:[],wantToRead:[],networkError:!1,pending:!0},n.updateBooks=function(e,t){return g(e,t).then(function(e){y().then(function(e){var t=[],a=[],o=[],r=!0,c=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;"read"===u.shelf?a.push(u):"currentlyReading"===u.shelf?t.push(u):"wantToRead"===u.shelf&&o.push(u)}}catch(h){c=!0,i=h}finally{try{r||null==l.return||l.return()}finally{if(c)throw i}}n.setState({currentlyReading:t,read:a,wantToRead:o})}).catch(function(e){n.setState(function(e){return{networkError:!e.networkError,pending:!e.pending}})})})},n.getBooks=function(){y().then(function(e){var t=[],a=[],o=[],r=!0,c=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;"read"===u.shelf?a.push(u):"currentlyReading"===u.shelf?t.push(u):"wantToRead"===u.shelf&&o.push(u)}}catch(h){c=!0,i=h}finally{try{r||null==l.return||l.return()}finally{if(c)throw i}}n.setState({pending:!n.state.pending,currentlyReading:t,read:a,wantToRead:o})}).catch(function(e){n.setState(function(e){return{networkError:!e.networkError,pending:!e.pending}})})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"render",value:function(){var e,t,n;return this.state.pending?t=o.a.createElement("h3",{style:{textAlign:"center"}},"Loading..."):this.state.networkError?e=o.a.createElement("h3",{style:{textAlign:"center"}},"A network Error Occured!!! Check your internet connection and try again"):this.state.networkError||this.state.pending||(n=o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.currentlyReading,title:"Currently Reading"}),o.a.createElement(q,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.read,title:"Read"}),o.a.createElement(q,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.wantToRead,title:"Want to Read"}))),o.a.createElement("div",{className:f.a.main},o.a.createElement("nav",{className:f.a.navbar},o.a.createElement("h2",null,"My Library")),o.a.createElement("div",{className:f.a.content},t,e,n),o.a.createElement(P.b,{to:"/search"},o.a.createElement("div",{className:f.a.link},o.a.createElement(M,null))))}}]),t}(a.Component),Q=n(11),J=n(20),K=n.n(J),Z=n(32),H=n.n(Z),F=function(e){return o.a.createElement("div",{className:e.classes},o.a.createElement("img",{src:H.a,alt:"Back Button",style:{width:"60px",height:"60px",float:"left"}}))},D=n(18),z=n.n(D),V=function(e){return o.a.createElement("div",{className:z.a["search-container"]},o.a.createElement(P.b,{to:"/"},o.a.createElement(F,{classes:z.a["back-button"]})),o.a.createElement("input",{value:e.query,className:z.a["search-books"],placeholder:"Search Books",onChange:function(t){return e.updateQuery(t)}}))},X=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",books:[],networkError:!1},n.onUpdateQuery=function(e){var t=e.target.value;n.setState({query:t.trim()}),v(n.state.query.trim()).then(function(e){void 0===e||e.error||y().then(function(t){var a=!0,o=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var s=c.value,l=!0,u=!1,h=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if(s.id===p.id){s.shelf=p.shelf;break}s.shelf="none"}}catch(m){u=!0,h=m}finally{try{l||null==f.return||f.return()}finally{if(u)throw h}}}}catch(m){o=!0,r=m}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}n.setState({books:e})})})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=null;return this.state.networkError&&(e=o.a.createElement("h3",{style:{textAlign:"center"}},"A network Error Occured!!! Check your internet connection and try again")),this.state.query&&void 0!==this.state.books&&0!==this.state.books.length&&(t=o.a.createElement("div",{className:K.a.results},this.state.books?this.state.books.map(function(e){return o.a.createElement(W,{key:e.id,book:e,update:g})}):"")),o.a.createElement("div",{className:K.a.container},o.a.createElement(V,{query:this.state.query,updateQuery:this.onUpdateQuery}),t,e)}}]),t}(o.a.Component),Y=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Q.a,{exact:!0,path:"/",component:U}),o.a.createElement(Q.a,{path:"/search",component:X}))}}]),t}(a.Component),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(P.a,null,o.a.createElement(Y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/my-reads",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/my-reads","/myreads-sw.js");$?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):G(t,e)})}}()}},[[33,1,2]]]);
//# sourceMappingURL=main.20767245.chunk.js.map
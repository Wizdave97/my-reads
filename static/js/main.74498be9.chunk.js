(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports={main:"library_main__BX3gv",navbar:"library_navbar__7EP6Y",content:"library_content__1JBKp",link:"library_link__1ZWZH"}},16:function(e,t,n){e.exports={shelf:"shelf_shelf__15eVK",title:"shelf_title__26ILy",header:"shelf_header__3wLMZ",books:"shelf_books__pvNQk"}},17:function(e,t,n){e.exports={book:"book_book__3a6ra",details:"book_details__CoZWK",dropdown:"book_dropdown__3eKLq"}},18:function(e,t,n){e.exports={"search-container":"searchInput_search-container__2PjK9","search-books":"searchInput_search-books__30INs","back-button":"searchInput_back-button__3qWWC"}},20:function(e,t,n){e.exports={results:"search_results__jFpeP",container:"search_container__2SQC7"}},27:function(e,t,n){e.exports=n.p+"static/media/arrow-drop-down.9d4e3f36.svg"},28:function(e,t,n){e.exports={modal:"modal_modal__tZHLq","show-modal":"modal_show-modal__1hWUS"}},29:function(e,t,n){e.exports=n.p+"static/media/add.75d390e5.svg"},32:function(e,t,n){e.exports=n.p+"static/media/arrow-back.20e8847d.svg"},33:function(e,t,n){e.exports=n(51)},38:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(26),c=n.n(r),s=(n(38),n(5)),i=n(6),l=n(8),u=n(7),h=n(9),d=(n(39),n(15)),p=n.n(d),m=n(12),k="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:f},y=function(){return fetch("".concat(k,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},v=function(e,t){return fetch("".concat(k,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},g=function(e){return fetch("".concat(k,"/search"),{method:"POST",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=n(16),w=n.n(E),_=n(14),x=n(17),j=n.n(x),O=n(27),S=n.n(O),R=function(){return o.a.createElement("img",{src:S.a,style:{width:"30px",height:"30px"},alt:"dropdown button"})},B=n(28),N=n.n(B),C=function(e){return o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.change(t)},name:e.name,checked:e.checked})},T=function e(t){var n={},a=null;t&&(n=t.modalShow?{display:"block"}:{display:"none"});var r=["none","read","wantToRead","currentlyReading"];if(t&&t.checkboxes)return a=t.checkboxes,o.a.createElement("div",{ref:e,className:N.a.modal,style:n},o.a.createElement("ul",null,["None","Read","want to Read","Currently Reading"].map(function(e,n){return o.a.createElement("li",{key:n},o.a.createElement(C,{change:t.change,name:r[n],checked:a[r[n]]}),e)})))},q=["currentlyReading","read","wantToRead"],A=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={modalShow:!1,checkboxes:{CurrentlyReading:!1,read:!1,none:!1,wantToRead:!1}},n.showModalHandler=function(){n.setState(function(e){return{modalShow:!e.modalShow}})},n.onCheckboxSelect=function(e){var t=e.target.name,a=n.state.checkboxes;Object.keys(a).map(function(e){return a[e]=!1}),a[t]=!0,n.setState({checkboxes:a}),n.props.update(n.props.book,t)},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;q.includes(this.props.book.shelf)?this.setState(function(t){return{checkboxes:Object(m.a)({},t.checkboxes,Object(_.a)({},e.props.book.shelf,!0))}}):this.setState(function(e){return{checkboxes:Object(m.a)({},e.checkboxes,Object(_.a)({},"none",!0))}})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:j.a.book},o.a.createElement("img",{src:this.props.book.imageLinks?this.props.book.imageLinks.thumbnail:"",alt:this.props.book.title?this.props.book.title:""}),o.a.createElement("div",{className:j.a.details},o.a.createElement("p",null,this.props.book.title?this.props.book.title:""),o.a.createElement("p",null,o.a.createElement("strong",null,this.props.book.authors?this.props.book.authors[0]:""))),o.a.createElement("div",{className:j.a.dropdown,role:"button",tabIndex:"0",onClick:function(){return e.showModalHandler()}},o.a.createElement(R,null)),o.a.createElement(T,{modalShow:this.state.modalShow,checkboxes:this.state.checkboxes,change:this.onCheckboxSelect}))}}]),t}(a.Component),L=function(e){var t=null;return e.books&&(t=e.books.map(function(t){return o.a.createElement(A,{getBooks:e.getBooks,update:e.update,key:t.id,book:t})})),o.a.createElement("div",{className:w.a.shelf},o.a.createElement("div",{className:w.a.header},o.a.createElement("h3",{className:w.a.title},e.title)),o.a.createElement("div",{className:w.a.books},t))},W=n(29),I=n.n(W),M=function(){return o.a.createElement("img",{src:I.a,alt:"Back Button"})},Q=n(10),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currentlyReading:[],read:[],wantToRead:[],networkError:!1,pending:!0},n.updateBooks=function(e,t){return v(e,t).then(function(e){y().then(function(e){var t=[],a=[],o=[],r=!0,c=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;"read"===u.shelf?a.push(u):"currentlyReading"===u.shelf?t.push(u):"wantToRead"===u.shelf&&o.push(u)}}catch(h){c=!0,s=h}finally{try{r||null==l.return||l.return()}finally{if(c)throw s}}n.setState({currentlyReading:t,read:a,wantToRead:o})}).catch(function(e){n.setState(function(e){return{networkError:!e.networkError,pending:!e.pending}})})})},n.getBooks=function(){y().then(function(e){var t=[],a=[],o=[],r=!0,c=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;"read"===u.shelf?a.push(u):"currentlyReading"===u.shelf?t.push(u):"wantToRead"===u.shelf&&o.push(u)}}catch(h){c=!0,s=h}finally{try{r||null==l.return||l.return()}finally{if(c)throw s}}n.setState({pending:!n.state.pending,currentlyReading:t,read:a,wantToRead:o})}).catch(function(e){n.setState(function(e){return{networkError:!e.networkError,pending:!e.pending}})})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"render",value:function(){var e,t,n;return this.state.pending?t=o.a.createElement("h3",{style:{textAlign:"center"}},"Loading..."):this.state.networkError?e=o.a.createElement("h3",{style:{textAlign:"center"}},"A network Error Occured!!! Check your internet connection and try again"):this.state.networkError||this.state.pending||(n=o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.currentlyReading,title:"Currently Reading"}),o.a.createElement(L,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.read,title:"Read"}),o.a.createElement(L,{update:this.updateBooks,getBooks:this.getBooks,books:this.state.wantToRead,title:"Want to Read"}))),o.a.createElement("div",{className:p.a.main},o.a.createElement("nav",{className:p.a.navbar},o.a.createElement("h2",null,"My Library")),o.a.createElement("div",{className:p.a.content},t,e,n),o.a.createElement(Q.b,{to:"/search"},o.a.createElement("div",{className:p.a.link},o.a.createElement(M,null))))}}]),t}(a.Component),K=n(11),P=n(20),Z=n.n(P),H=n(32),U=n.n(H),F=function(e){return o.a.createElement("div",{className:e.classes},o.a.createElement("img",{src:U.a,alt:"Back Button",style:{width:"60px",height:"60px",float:"left"}}))},D=n(18),z=n.n(D),V=function(e){return o.a.createElement("div",{className:z.a["search-container"]},o.a.createElement(Q.b,{to:"/"},o.a.createElement(F,{classes:z.a["back-button"]})),o.a.createElement("input",{value:e.query,className:z.a["search-books"],placeholder:"Search Books",onChange:function(t){return e.updateQuery(t)}}))},X=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",books:[],networkError:!1},n.onUpdateQuery=function(e){var t=e.target.value;n.setState({query:t.trim()}),g(n.state.query.trim()).then(function(e){void 0===e||e.error||y().then(function(t){var a=!0,o=!1,r=void 0;try{for(var c,s=e[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var i=c.value,l=!0,u=!1,h=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;if(i.id===m.id){i.shelf=m.shelf;break}i.shelf="none"}}catch(k){u=!0,h=k}finally{try{l||null==p.return||p.return()}finally{if(u)throw h}}}}catch(k){o=!0,r=k}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}n.setState({books:e})})})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=null;return this.state.networkError&&(e=o.a.createElement("h3",{style:{textAlign:"center"}},"A network Error Occured!!! Check your internet connection and try again")),this.state.query&&void 0!==this.state.books&&0!==this.state.books.length&&(t=o.a.createElement("div",{className:Z.a.results},this.state.books?this.state.books.map(function(e){return o.a.createElement(A,{key:e.id,book:e,update:v})}):"")),o.a.createElement("div",{className:Z.a.container},o.a.createElement(V,{query:this.state.query,updateQuery:this.onUpdateQuery}),t,e)}}]),t}(o.a.Component),Y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{exact:!0,path:"/",component:J}),o.a.createElement(K.a,{path:"/search",component:X}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(Q.a,null,o.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.74498be9.chunk.js.map